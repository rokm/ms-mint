
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Soren Wacker">
      
      
        <link rel="canonical" href="https://github.com/sorenwacker/ms-mint/python/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.1.8">
    
    
      
        <title>Python API - MINT</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
  


  


  
  


  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-207276128-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MINT" class="md-header__button md-logo" aria-label="MINT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MINT
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python API
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MINT" class="md-nav__button md-logo" aria-label="MINT" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    MINT
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../background/" class="md-nav__link">
        Background
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gui/" class="md-nav__link">
        GUI
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../targets/" class="md-nav__link">
        Targets
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../jupyter/" class="md-nav__link">
        Jupyter
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../developer-notes/" class="md-nav__link">
        Developer Notes
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../gallery/" class="md-nav__link">
        Gallery
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#load-files" class="md-nav__link">
    Load files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-mint" class="md-nav__link">
    Running Mint
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#results" class="md-nav__link">
    Results
  </a>
  
    <nav class="md-nav" aria-label="Results">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#peak-shapes" class="md-nav__link">
    Peak shapes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plotting-peak-shapes" class="md-nav__link">
    Plotting peak shapes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#export" class="md-nav__link">
    Export
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="python-api">Python API</h1>
<p>The <code>MINT</code> API for Python can be imported as a python object and used in a python script or interactively in a Jupyter notebook environment. A typical workflow using the Python API is described in the following:</p>
<pre><code>from ms_mint import Mint
from glob import glob
</code></pre>
<p>Fist, the Mint class has to be instantiated:</p>
<pre><code>mint = Mint(verbose=False)
</code></pre>
<h3 id="load-files">Load files</h3>
<p>One ore more peaklist files as well as mass-spec files have to be assigned to <code>mint.peaklist_files</code> and <code>mint.files</code> accordingly:</p>
<pre><code>mint.peaklist_files = ['path_to/peaklist-file.csv']
mint.files = glob('path_to/ms-files/*/**.mzML', recursive=True)
</code></pre>
<p>Calling the <code>peaklist()</code> method displays the imported and concatenated peaklists:</p>
<pre><code>print(mint.peaklist)
</code></pre>
<pre>
  peak_label    mz_mean  mz_width  rt_min  rt_max  intensity_threshold                peaklist
0          1  151.06050         5    5.07    5.09                    0  ./data/peaklist_v0.csv
1          2  216.05040         5    3.98    4.39                    0  ./data/peaklist_v0.csv
2          3  115.00320         5    3.45    4.39                    0  ./data/peaklist_v0.csv
3          4  273.00061         5    1.10    2.22                    0  ./data/peaklist_v0.csv
</pre>

<h3 id="running-mint">Running Mint</h3>
<p>Then mint can be executed calling the <code>run()</code> method:</p>
<pre><code>mint.run()

&gt; Run MINT
&gt; Total runtime: 6.18s
&gt; Runtime per file: 3.09s
&gt; Runtime per peak (79): 0.04s
</code></pre>
<h3 id="results">Results</h3>
<p>The result will be stored in the <code>results</code> and the <code>crosstab</code> attributes as <code>pandas.DataFrames()</code>. Where <code>mint.results</code> contains all results:</p>
<pre><code>print(mint.results)
</code></pre>
<pre>
peak_label    mz_mean  mz_width  rt_min  rt_max  intensity_threshold  peaklist  peak_area  ms_file ms_path  file_size  intensity_sum
1  151.06050  5    5.07    5.09  0  ./data/peaklist_v0.csv  2.879748e+03  ./data/test.mzXML  ./data  14.201964   5.607296e+10
2  216.05040  5    3.98    4.39  0 ./data/peaklist_v0.csv  4.892307e+05  ./data/test.mzXML  ./data  14.201964   5.607296e+10
3  115.00320  5    3.45    4.39  0  ./data/peaklist_v0.csv  3.916772e+07  ./data/test.mzXML  ./data  14.201964   5.607296e+10
4  273.00061  5    1.10    2.22  0  ./data/peaklist_v0.csv  6.862484e+06  ./data/test.mzXML  ./data  14.201964   5.607296e+10
1  151.06050  5    5.07    5.09  0  ./data/peaklist_v0.csv  2.879748e+03  ./data/test.mzXML  ./data  14.201964   5.607296e+10
2  216.05040  5    3.98    4.39  0  ./data/peaklist_v0.csv  4.892307e+05  ./data/test.mzXML  ./data  14.201964   5.607296e+10
3  115.00320  5    3.45    4.39  0  ./data/peaklist_v0.csv  3.916772e+07  ./data/test.mzXML  ./data  14.201964   5.607296e+10
4  273.00061  5    1.10    2.22  0  ./data/peaklist_v0.csv  6.862484e+06  ./data/test.mzXML  ./data  14.201964   5.607296e+10
</pre>

<p>and <code>crosstab()</code> can shows a compressed form of the data only containing one property e.g. the extracted <code>peak_area</code>:</p>
<pre>
...
</pre>

<h4 id="peak-shapes">Peak shapes</h4>
<p>The last property is <code>mint.rt_projections</code> which stores a dictionary of dictionaries with peak shapes:</p>
<pre>
{'1': {'./data/test.mzXML': retentionTime
  5.079267    2879.747559
  dtype: float32},
 '2': {'./data/test.mzXML': retentionTime
  3.986050    15166.202148
  3.996917    14039.182617
  4.007817    15455.113281
  4.018700    16612.851562
  4.029633    22065.619141
  4.040633    26693.970703
  4.051533    22569.896484
  4.062450    32379.552734
  4.073567    27225.439453
  4.084683    22142.037109
  4.095867    22974.357422
  4.106900    23733.207031
  4.117917    25081.419922
  4.128983    17945.343750
  4.140200    14623.268555
  4.151250    16119.997070
  4.162317    15771.708008
  4.173467    11171.838867
  4.184517    12554.623047
  ...
</pre>

<h4 id="plotting-peak-shapes">Plotting peak shapes</h4>
<p>The peak shapes can be plotted with the same function that is used by the GUI's:</p>
<pre><code>from ms_mint.plotly_tools import plot_rt_projections
plot_rt_projections(mint)
</code></pre>
<h3 id="export">Export</h3>
<p>Mint results can be exported using the <code>export()</code> method. A filename has to be provided:</p>
<pre><code>mint.export('MINT-results.xlsx')
</code></pre>
<p>An Excel file with the results is exported. The file includes the data of all windows that were used as well as some metadata such as date and the current verion of <code>Mint</code>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>